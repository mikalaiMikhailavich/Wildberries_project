function e(e,a,t,n){Object.defineProperty(e,a,{get:t,set:n,enumerable:!0,configurable:!0})}function a(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},c=t.parcelRequiref3df;null==c&&((c=function(e){if(e in n)return n[e].exports;if(e in r){var a=r[e];delete r[e];var t={id:e,exports:{}};return n[e]=t,a.call(t.exports,t,t.exports),t.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,a){r[e]=a},t.parcelRequiref3df=c),c.register("27Lyk",(function(a,t){var n,r;e(a.exports,"register",(()=>n),(e=>n=e)),e(a.exports,"resolve",(()=>r),(e=>r=e));var c={};n=function(e){for(var a=Object.keys(e),t=0;t<a.length;t++)c[a[t]]=e[a[t]]},r=function(e){var a=c[e];if(null==a)throw new Error("Could not resolve bundle with id "+e);return a}})),c("27Lyk").register(JSON.parse('{"ioUUD":"index.348c92ea.js","deraC":"wildberries-logo.edce3343.svg","8e8TJ":"slider-image1.573239eb.jpg","4KruX":"slider-image2.a23de46d.jpg"}'));const s=(e,a={})=>{let t=document.createElement(e),n=["innerHTML","className","class","classList","checked","readOnly","src","alt","disabled"];for(const e in a)if(a[e])if(n.includes(e))switch(e){case"innerHTML":case"checked":case"classList":case"className":case"readOnly":case"src":case"alt":t[e]=a[e]}else t.setAttribute(e,a[e]);return t},i=(e={})=>{const{className:a,value:t,onClick:n}=e,r=((e,a)=>s("input",{type:"button",value:a,className:e}))(a,t);return n&&"function"==typeof n&&r.addEventListener("click",n),r},l=(e={})=>{const{src:a,alt:t,className:n}=e,r=((e,a,t)=>s("img",{src:e,alt:a,className:t}))(a,t,n);return r},o=(e={})=>{const{tagName:a="div",id:t,className:n,children:r=null,onClick:c}=e,i=((e,a,t)=>s(e,{id:a,className:t}))(a,t,n);return Array.isArray(r)&&r.length&&i.append(...r),c&&"function"==typeof c&&i.addEventListener("click",c),i},d=l({alt:"headerLogo",className:"image header__logo"});var u;u=new URL(c("27Lyk").resolve("deraC"),import.meta.url).toString(),d.src=new URL(u);const m=o({className:"header__logo-container",children:[d]});function _(){let e=[];return{add:function(a){e.push(a)},clear:function(){e=[]},read:function(){return[...e]},delete:function(a){e.splice(a,1)},getElement:function(a){return e.find((e=>e.id==a))},create:function(){e=[]},updateFullPrice:function(){return fullPrice=[...e].reduce(((e,a)=>Math.trunc(a.price-a.price*a.rating.rate*.01+e)),0),fullPrice},updateMainCounter:function(){return[...e].length}}}const h=_(),f=_();const p=o({className:"container shopping__container"}),g=o({className:"modal"}),N=o({tagName:"section",id:"shopping",className:"shopping",children:[p,g]});function v(){x.innerHTML=f.updateMainCounter(),M.innerHTML=`${Math.trunc(f.updateFullPrice())}$`}const L=i({className:"button cart__clear-button",value:"Очистить корзину",onClick:()=>{f.clear(),H.innerHTML=null;document.querySelectorAll(".button__to-cart").forEach((e=>e.disabled=!1)),h.read().forEach((e=>e.disabled=!1)),v()}}),b=s("h3",{className:"cart__title",innerHTML:"Корзина"}),w=o({className:"cart__header",children:[b,L]}),E=s("h4",{className:"cart__item-price-text",innerHTML:"Итого:"}),M=s("h4",{className:"cart__item-total-price",innerHTML:"0$"}),y=o({className:"cart__footer",children:[E,M]}),H=o({className:"cart__item-container"}),T=o({className:"cart__container",children:[w,H,y]}),k=document.createElement("div");k.innerHTML=a('<svg width="27" height="24" fill="#fff" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.5 1.5c0 1-2.5 1-4 1s-4 0-4-1 2.5-1 4-1 4 0 4 1Zm3.321 14.619a1 1 0 0 1-1.1-.652L7.483 6.357a1 1 0 0 1 .958-1.335l17.36.28a1 1 0 0 1 .964 1.196l-1.354 6.792a1 1 0 0 1-.824.792l-12.766 2.036Zm1.831 4.914a2.326 2.326 0 1 1-4.652 0 2.326 2.326 0 0 1 4.652 0Zm9.305 2.326a2.326 2.326 0 1 0 0-4.652 2.326 2.326 0 0 0 0 4.652Z"/></svg>'),k.className="cart__icon";const x=s("div",{className:"cart__icon-counter",innerHTML:`${f.updateMainCounter()}`}),C=o({className:"cart__icon-container",children:[k,x]}),S=o({className:"cart header__cart",children:[C,T]});function R(e){const{title:a,price:t,id:n,rating:{rate:r}}=e,c=s("div",{className:"cart__item"});c.dataset.id=n;const l=s("h4",{innerHTML:a,className:"cart__item-title"}),o=s("h4",{innerHTML:`${Math.trunc(t-t*r*.01)}$`});console.log();const d=i({className:"button cart__button-delete",value:"x",onClick:()=>{const e=f.getElement(n),a=f.read().indexOf(e);f.delete(a);h.getElement(n).disabled=!1;const t=document.querySelector(`[data-name="${n}"]`);t&&(t.disabled=!1),H.innerHTML=null,f.read().forEach((e=>{R(e)})),v()}});return c.append(l,o,d),H.append(c),c}C.addEventListener("click",(()=>T.classList.toggle("show")));const A=new Request("https://fakestoreapi.com/products",{method:"GET"}),O=()=>{const e=f.read();e.length?localStorage.setItem("wildberries",JSON.stringify(e)):localStorage.setItem("wildberries","[]")};const $=e=>{const{id:a,title:t,inBasket:n,image:r,alt:c,price:d,disabled:u,rating:{rate:m}}=e,_=o({id:a,className:n?"card card__inBasket":"card"}),g=l({src:r,alt:c,className:"image card__image"}),N=i({className:"button button__modal",value:"Быстрый просмотр",onClick:()=>{const e=h.getElement(a);U(e),T.classList.remove("show")}}),L=s("div",{innerHTML:`-${m} % `,className:"card__discount"}),b=i({className:"button button__to-cart",value:"Добавить в корзину",onClick:()=>{const e=h.getElement(a);console.log(e),e.disabled=!0,f.add(e),H.innerHTML=null,f.read().forEach((e=>{R(e)})),b.disabled=!0,v()}});b.dataset.name=a;const w=null!=f.getElement(a);b.disabled=u||w;const E=o({className:"card__discount-and-button-container",children:[L,b]}),M=s("div",{innerHTML:`${Math.trunc(d-d*m*.01)}$`,className:"card__price"}),y=s("div",{innerHTML:d,className:"card__price card__price_crossed-out"}),k=o({className:"card__price-and-price-discount-container",children:[M,y]}),x=s("div",{className:"card__title",innerHTML:t});return _.append(g,N,E,k,x),p.append(_),_},U=e=>{const{id:a,title:t,image:n,alt:r,price:c,description:d,rating:{rate:u}}=e,m=o({id:a,className:"modal-card"}),_=l({src:n,alt:r,className:"image modal-card__image"}),h=s("div",{className:"modal-card__name",innerHTML:t}),f=i({className:"modal-card__close",value:"x",onClick:()=>{document.querySelector(".modal-card").remove()}}),p=o({className:"modal-card__image-container",children:[_,h,f]});return m.append(p),g.append(m),m},q=((e={})=>{const{className:a,value:t,placeholder:n,onChange:r}=e,c=((e,a,t)=>s("input",{type:"text",className:e,value:a,placeholder:t}))(a,t,n);return r&&"function"==typeof r&&c.addEventListener("keyup",r),c})({className:"header__search",placeholder:"Поиск...",onChange:()=>function(e){let a=h.read().filter((a=>a.title.toLowerCase().includes(e.toLowerCase())));p.innerHTML=null,a.forEach((e=>$(e)))}(q.value)});const F=o({className:"container header__container",children:[m,q,S]}),j=o({id:"header",className:"header",children:[F]}),J=i({className:"slider__button-left",value:"<"}),P=i({className:"slider__button-right",value:">"}),Z=(o({className:"slider__button-container",children:[J,P]}),l({className:"slider__image"}));var D;D=new URL(c("27Lyk").resolve("8e8TJ"),import.meta.url).toString(),Z.src=new URL(D);const I=o({className:"slider__image-container",children:[Z]}),B=l({className:"slider__image"});var K;K=new URL(c("27Lyk").resolve("4KruX"),import.meta.url).toString(),B.src=new URL(K);const X=o({className:"slider__image-container",children:[B]}),G=o({className:" slider__inner",children:[I,X]}),z=o({className:"container slider__container"});z.append(P,J,G);const Q=o({id:"slider",className:"slider",children:[z]}),V=Array.from(G.children);function W(e){const a=G.querySelector("[data-active]"),t=+a.dataset.index;let n;a.classList.add("hide"),a.removeAttribute("data-active"),"next"===e?n=t+1===V.length?0:t+1:"prev"===e&&(n=0===t?V.length-1:t-1);const r=Q.querySelector(`[data-index="${n}"]`);r.classList.remove("hide"),r.setAttribute("data-active","")}V.forEach(((e,a)=>{0!==a&&e.classList.add("hide"),e.dataset.index=a,V[0].setAttribute("data-active","")})),P.onclick=function(){W("next")},J.onclick=function(){W("prev")},window.addEventListener("beforeunload",(()=>O())),(()=>{const e=localStorage.getItem("wildberries"),a=JSON.parse(e)||[];a.length&&(a.forEach((e=>{f.add(e)})),f.read().forEach((e=>R(e))))})(),fetch(A).then((e=>e.json())).then((e=>{e.forEach((e=>h.add(e))),h.read().forEach((e=>{$(e)})),v()})),root.append(j,Q,N);
//# sourceMappingURL=index.348c92ea.js.map
